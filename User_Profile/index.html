<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Profile</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css">
    <link rel="stylesheet" href="./font/fontawesome-free-6.2.0-web/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@100;300;400;500;700&display=swap" rel="stylesheet"> 
    <link rel="stylesheet" href="pr.css">
</head>
<body>
    <div class="main">
        <div class="navbar">
                <div class="navbar__logo"></div>
                <ul class="navbar__list">
                    <li class="navbar__item navbar__item--actived">
                        <a href="#" class="navbar__item-link">
                            <i class="navbar__item-icon fa-regular fa-user"></i>
                            Tài khoản
                        </a>
                        
                    </li>
                    <li class="navbar__item">
                        <a href="#" class="navbar__item-link">
                            <i class="navbar__item-icon fa-solid fa-lock"></i>
                            Đổi mật khẩu
                        </a>
                    </li>
                    <li class="navbar__item">
                        <a href="#" class="navbar__item-link">
                            <i class="navbar__item-icon fa-regular fa-rectangle-list"></i>
                            Lịch sử đơn hàng
                        </a>
                    </li>
                </ul>

                <div class="navbar__logout">
                    <a href="#" class="navbar__logout-link">
                        <i class="fa-solid fa-arrow-right-from-bracket"></i>
                        LOG OUT
                    </a>
                </div>
        </div>

        <div class="contain__main">
            <div class="content">
                <div class="background__contain">
                    <img src="./imgs/bgr2.jpg" alt="" class="content__background">
                </div>
                <div class="content__information">
                    <form class="content__form">
                        <div class="content__form-text">
                            <div class="content__form-start">
                                <p>Họ và tên</p>
                                <p style="color: red;">*</p>
                            </div>
                            <input class="content__form-input" placeholder="Nhập họ và tên">
                        </div>
                        <div class="content__form-text">
                            <div class="content__form-start">
                                <p>Ngày sinh</p>
                            </div>
                            <input type="date" class="content__form-input" placeholder="Nhập ngày sinh">
                        </div>
                        <div class="content__form-text">
                            <div class="content__form-start">
                                <p>Số điện thoại</p>
                                <p style="color: red;">*</p>
                            </div>
                            <input class="content__form-input phone__input" placeholder="Nhập số điện thoại">
                        </div>
                        <div class="content__form-text">
                            <div class="content__form-start">
                                <p>Email</p>
                                <p style="color: red;">*</p>
                            </div>
                            <input type="email" class="content__form-input" placeholder="Nhập email">
                        </div>
                        <div class="content__form-text">
                            <div class="content__form-start">
                                <p>Giới tính</p>
                                <p style="color: red;">*</p>
                            </div>
                            <input class="content__form-input" placeholder="Nam/Nữ">
                        </div>
                        <div class="content__form-text">
                            <div class="content__form-start">
                                <p>Địa chỉ mặc định</p>
                                <p style="color: red;">*</p>
                            </div>
                            <input class="content__form-input" placeholder="Nhập địa chỉ">
                        </div>
                        <button onclick="send__data()" type="submit" class="save__btn">LƯU</button>
                    </form>
                </div>
                
                <div class="content__avt">
                    <img src="./imgs/meome.jpg" alt="Ảnh nền" class="background">
                </div>

                <span class="nickname">AnhKhoi123</span>

                <div class="choose__avt">
                    <svg width="20" height="18" viewBox="0 0 19 17" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M18.05 17H0.95C0.425125 17 0 16.5774 0 16.0556V2.83333C0 2.31153 0.425125 1.88889 0.95 1.88889H4.75V0.944444C4.75 0.422639 5.17513 0 5.7 0H13.3C13.8249 0 14.25 0.422639 14.25 0.944444V1.88889H18.05C18.5749 1.88889 19 2.31153 19 2.83333V16.0556C19 16.5774 18.5749 17 18.05 17ZM1.9 15.1111H17.1V3.77778H13.3C12.7751 3.77778 12.35 3.35514 12.35 2.83333V1.88889H6.65V2.83333C6.65 3.35514 6.22487 3.77778 5.7 3.77778H1.9V15.1111Z" fill="#969695"></path><path d="M9.5 14.1666C6.88038 14.1666 4.75 12.0487 4.75 9.44439C4.75 6.84008 6.88038 4.72217 9.5 4.72217C12.1196 4.72217 14.25 6.84008 14.25 9.44439C14.25 12.0487 12.1196 14.1666 9.5 14.1666ZM9.5 6.61106C7.92775 6.61106 6.65 7.88133 6.65 9.44439C6.65 11.0074 7.92775 12.2777 9.5 12.2777C11.0722 12.2777 12.35 11.0074 12.35 9.44439C12.35 7.88133 11.0722 6.61106 9.5 6.61106Z" fill="#969695"></path></svg>
                    <input id="upload-button" type="file" class="avt__change" accept="image/*">
                    <label style="caret-color:transparent" for="upload-button"></label>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Thanh Navbar
        const $ = document.querySelector.bind(document);
        const $$ = document.querySelectorAll.bind(document);
        const navbar_items = $$(".navbar__item");

        navbar_items.forEach((element, index) => {
            
            element.onclick = function(){
                $(".navbar__item.navbar__item--actived").classList.remove("navbar__item--actived");
                
                this.classList.add("navbar__item--actived");
            }
        });
        
        // Chuyển ảnh avatar
        const uploadBtn = $("#upload-button");
        const chosenImg = $(".background");

        uploadBtn.onchange = () => {
            console.log(uploadBtn.files[0]);
            let reader = new FileReader();

            reader.readAsDataURL(uploadBtn.files[0]);
            reader.onload = () => {
                chosenImg.setAttribute("src", reader.result);
            }
        }


        // Validate data input
        function PhoneNumberValid(number) 
        {
            return /(03|05|07|08|09|01[2|6|8|9])+([0-9]{8})\b/.test(number);
        }

        function GenderValid(gender)
        {
            if(gender == 'Nam' || gender == 'nam' || gender == 'Nữ' || gender == 'nữ')
            {
                return true;
            }

            return false;
        }

        function EmailValid(email){
            var atposition = email.indexOf("@");
            var dotposition = email.lastIndexOf(".");
            if (atposition < 1 || dotposition < (atposition + 2)|| (dotposition + 2) >= email.length)
            {
                return false;
            }
            else
            {
               return true;
            }
        }

        function send__data(){
            var arrayInput = $$('input');
            var name = arrayInput[0].value;
            var phone = arrayInput[2].value;
            var email = arrayInput[3].value;
            var gender = arrayInput[4].value;
            var address = arrayInput[5].value;

            if(name == "" || phone == "" || email == "" || gender == "" || address == "")
            {
                alert("Please fill all fields! ");
                return;
            }
            else if(!PhoneNumberValid(phone))
            {
                alert("Phone is not exist.");
                return;
            }
            else if(!GenderValid(gender))
            {
                alert("Gender is not exist.");
                return;
            }

            else if(!EmailValid(email))
            {
                alert("Email is not exist.");
                return;
            }

            setTimeout(function(){
                $(".save__btn").classList.add("save__btn--successful");
                $(".save__btn").innerHTML = "LƯU THÀNH CÔNG";
                setTimeout(function()
                {
                    $(".save__btn.save__btn--successful").classList.remove("save__btn--successful");
                $(".save__btn").innerHTML = "LƯU";
                }, 2000)
            }, 400)
  
        }        
        
    </script>
</body>
</html>